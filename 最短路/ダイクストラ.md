# ダイクストラ法

## 使用法（基本）

`隣接リスト`、`始点`、`コスト計算関数`を渡すと、`Option<距離>`の配列を返す。

`コスト計算関数`は`辺`と`現在の距離`を受け取り、`Option<次の距離>`を返すことを想定されている。（`None`の場合はその辺は通らない）

```rust
let dists = dijkstra(&graph, start, |&(_to, cost), dist| Some(dist + cost) );
println!("{}", dists[goal].unwrap_or(-1));
```

```rust
fn dijkstra<C: Copy + num_traits::Num + Eq + Ord>(graph: &Vec<Vec<(usize, C)>>, start: usize, mut cost: impl FnMut(&(usize, C), C) -> Option<C>) -> Vec<Option<C>> {
  let mut dists = vec![None; graph.len()];
  dists[start] = Some(C::zero());
  let mut pq = BinaryHeap::new();
  pq.push((std::cmp::Reverse(C::zero()), start));
  while let Some((std::cmp::Reverse(d1), u)) = pq.pop() {
    if dists[u].unwrap() != d1 { continue }
    for e in &graph[u] {
      if let Some(d2) = (cost)(e, d1) {
        if dists[e.0].map(|d3| d3 > d2 ).unwrap_or(true) {
          dists[e.0] = Some(d2);
          pq.push((std::cmp::Reverse(d2), e.0));
        }
      }
    }
  }
  dists
}
```
